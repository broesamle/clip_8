<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>clip8:selftest:clip8</title>

<link rel="shortcut icon" type="image/png" href="../lib/jasmine-2.5/jasmine_favicon.png">
<link rel="stylesheet" href="../lib/jasmine-2.5/jasmine.css">
<link rel="stylesheet" href="../css/refsheet.css">
<link rel="stylesheet" href="../css/clip8.css">

<script src="../lib/jasmine-2.5/jasmine.js"></script>
<script src="../lib/jasmine-2.5/jasmine-html.js"></script>
<script src="../lib/jasmine-2.5/boot.js"></script>
<script src="../js/clip8.js"></script>
</head>

<body>
<p>This test sheet tests the generic testing environment. Some tests are built to fail in a specific way. Please read and investigate carefully.</p>

<p>
<b>Report Format:</b><br> [&nbsp;test==pre&nbsp;&nbsp;execution&nbsp;&nbsp;test==post&nbsp;]
<br>
<span class="DOMreftest-passed">•</span>
<span class="DOMreftest-failed">×</span>
<span class="DOMreftest-failed">×</span>
</p>


<h1>clip_8: Selftest<br><span class="sndtitle">clip8.js</span></h1>

<p>Performs the self-test with the current version of clip_8.</p>

<h2>reference sheet itself is well-formed</h2>

<p>
The svg element is valid for the whole section.<br>
For the present operation, the post reference can only match if the operation is removed.
</p>

<h3>valid operation absent</h3>

<p>.testDOM matches pre, post</p>
<p class="DOMreftest envokeOperation" id="SVGvalid_OPabsent_prepost">
<span class="pre-reference">
<svg viewbox="-2 -2 68 68" width="68" height="68">
<rect class="value" x="0" y="0" width="32" height="32" />
</svg>
</span>
&nbsp;==&gt;&nbsp;
<span class="post-reference">
<svg viewbox="-2 -2 68 68" width="68" height="68">
<rect class="value" x="0" y="0" width="32" height="32" />
</svg>
</span>
&nbsp;:&nbsp;&nbsp;&nbsp;
<span class="testDOM">
<svg viewbox="-2 -2 68 68" width="68" height="68">
<rect class="value" x="0" y="0" width="32" height="32" />
</svg>
</span>
</p>

<p>.testDOM matches pre</p>
<p class="DOMreftest envokeOperation" id="SVGvalid_OPabsent_pre">
<span class="pre-reference">
<svg viewbox="-2 -2 68 68" width="68" height="68">
<rect class="value" x="0" y="0" width="32" height="32" />
</svg>
</span>
&nbsp;==&gt;&nbsp;
<span class="post-reference">
<svg viewbox="-2 -2 68 68" width="68" height="68">
<rect class="value" x="0" y="0" width="32" height="16" />
</svg>
</span>
&nbsp;:&nbsp;&nbsp;&nbsp;
<span class="testDOM">
<svg viewbox="-2 -2 68 68" width="68" height="68">
<rect class="value" x="0" y="0" width="32" height="32" />
</svg>
</span>
</p>

<p>.testDOM matches post</p>
<p class="DOMreftest envokeOperation" id="SVGvalid_OPabsent_post">
<span class="pre-reference">
<svg viewbox="-2 -2 68 68" width="68" height="68">
<rect class="value" x="0" y="0" width="32" height="32" />
</svg>
</span>
&nbsp;==&gt;&nbsp;
<span class="post-reference">
<svg viewbox="-2 -2 68 68" width="68" height="68">
<rect class="value" x="0" y="0" width="32" height="16" />
</svg>
</span>
&nbsp;:&nbsp;&nbsp;&nbsp;
<span class="testDOM">
<svg viewbox="-2 -2 68 68" width="68" height="68">
<rect class="value" x="0" y="0" width="32" height="16" />
</svg>
</span>
</p>

<p>.testDOM matches none</p>
<p class="DOMreftest envokeOperation" id="SVGvalid_OPabsent_none">
<span class="pre-reference">
<svg viewbox="-2 -2 68 68" width="68" height="68">
<rect class="value" x="0" y="0" width="32" height="32" />
</svg>
</span>
&nbsp;==&gt;&nbsp;
<span class="post-reference">
<svg viewbox="-2 -2 68 68" width="68" height="68">
<rect class="value" x="0" y="0" width="32" height="16" />
</svg>
</span>
&nbsp;:&nbsp;&nbsp;&nbsp;
<span class="testDOM">
<svg viewbox="-2 -2 68 68" width="68" height="68">
<rect class="value" x="32" y="0" width="32" height="8" />
</svg>
</span>
</p>

<h3>valid operation present</h3>

<p>.testDOM matches pre, post (except for the operation)</p>
<p class="DOMreftest envokeOperation" id="SVGvalid_OPpresent_prepost">
<span class="pre-reference">
<svg viewbox="-2 -2 68 68" width="68" height="68">
<rect class="value" x="0" y="0" width="32" height="32" />
<circle class="clip8OP noop" cx="32" cy="32" r="10" />
</svg>
</span>
&nbsp;==&gt;&nbsp;
<span class="post-reference">
<svg viewbox="-2 -2 68 68" width="68" height="68">
<rect class="value" x="0" y="0" width="32" height="32" />
</svg>
</span>
&nbsp;:&nbsp;&nbsp;&nbsp;
<span class="testDOM">
<svg viewbox="-2 -2 68 68" width="68" height="68">
<rect class="value" x="0" y="0" width="32" height="32" />
<circle class="clip8OP noop" cx="32" cy="32" r="10" />
</svg>
</span>
</p>

<p>.testDOM matches pre</p>
<p class="DOMreftest envokeOperation" id="SVGvalid_OPpresent_pre">
<span class="pre-reference">
<svg viewbox="-2 -2 68 68" width="68" height="68">
<rect class="value" x="0" y="0" width="32" height="32" />
<circle class="clip8OP noop" cx="32" cy="32" r="10" />
</svg>
</span>
&nbsp;==&gt;&nbsp;
<span class="post-reference">
<svg viewbox="-2 -2 68 68" width="68" height="68">
<rect class="value" x="0" y="0" width="32" height="16" />
</svg>
</span>
&nbsp;:&nbsp;&nbsp;&nbsp;
<span class="testDOM">
<svg viewbox="-2 -2 68 68" width="68" height="68">
<rect class="value" x="0" y="0" width="32" height="32" />
<circle class="clip8OP noop" cx="32" cy="32" r="10" />
</svg>
</span>
</p>

<p>.testDOM matches post (except for the operation)</p>
<p class="DOMreftest envokeOperation" id="SVGvalid_OPpresent_post">
<span class="pre-reference">
<svg viewbox="-2 -2 68 68" width="68" height="68">
<rect class="value" x="0" y="0" width="32" height="32" />
<circle class="clip8OP noop" cx="32" cy="32" r="10" />
</svg>
</span>
&nbsp;==&gt;&nbsp;
<span class="post-reference">
<svg viewbox="-2 -2 68 68" width="68" height="68">
<rect class="value" x="0" y="0" width="32" height="16" />
</svg>
</span>
&nbsp;:&nbsp;&nbsp;&nbsp;
<span class="testDOM">
<svg viewbox="-2 -2 68 68" width="68" height="68">
<rect class="value" x="0" y="0" width="32" height="16" />
<circle class="clip8OP noop" cx="32" cy="32" r="10" />
</svg>
</span>
</p>

<p>.testDOM matches none</p>
<p class="DOMreftest envokeOperation" id="SVGvalid_OPpresent_none">
<span class="pre-reference">
<svg viewbox="-2 -2 68 68" width="68" height="68">
<rect class="value" x="0" y="0" width="32" height="32" />
<circle class="clip8OP noop" cx="32" cy="32" r="10" />
</svg>
</span>
&nbsp;==&gt;&nbsp;
<span class="post-reference">
<svg viewbox="-2 -2 68 68" width="68" height="68">
<rect class="value" x="0" y="0" width="32" height="16" />
</svg>
</span>
&nbsp;:&nbsp;&nbsp;&nbsp;
<span class="testDOM">
<svg viewbox="-2 -2 68 68" width="68" height="68">
<rect class="value" x="32" y="0" width="32" height="8" />
<circle class="clip8OP noop" cx="32" cy="32" r="10" />
</svg>
</span>
</p>

<h2>reference sheet itself invalid</h2>

<p>This section tests the generic test's robustness when the reference sheet test definitions are not well-formed.</p>

<h3>missing svg elements</h3>

<p>all present (matching)</p>
<p class="DOMreftest envokeOperation" id="SVGbroke-svgpresent">
<span class="pre-reference" >
<svg viewbox="-2 -2 68 68" width="68" height="68">
<rect class="value" x="0" y="0" width="32" height="32" />
</svg>
</span>
&nbsp;==&gt;&nbsp;
<span class="post-reference">
<svg viewbox="-2 -2 68 68" width="68" height="68">
<rect class="value" x="0" y="0" width="32" height="32" />
</svg>
</span>
&nbsp;:&nbsp;&nbsp;&nbsp;
<span class="testDOM">
<svg viewbox="-2 -2 68 68" width="68" height="68">
<rect class="value" x="0" y="0" width="32" height="32" />
</svg>
</span>
</p>


<p>all absent (matching), execution should fail</p>
<p class="DOMreftest envokeOperation" id="SVGbroke-svgabsent">
<span class="pre-reference" >
</span>
&nbsp;==&gt;&nbsp;
<span class="post-reference">
</span>
&nbsp;:&nbsp;&nbsp;&nbsp;
<span class="testDOM">
</span>
</p>

<p>replaced by span elements. should only fail if the operation detects it.</p>
<p class="DOMreftest envokeOperation" id="SVGbroke-spaninsteadsvg">
<span class="pre-reference" >
<span>not svg</span>
</span>
&nbsp;==&gt;&nbsp;
<span class="post-reference">
<span>not svg</span>
</span>
&nbsp;:&nbsp;&nbsp;&nbsp;
<span class="testDOM">
<span>not svg</span>
</span>
</p>

<h3>svg elements with ids</h3>

<p>
Ids should be unique. Reference test elements should be identical, which contradicts the idea of having a unique id.
In addition, in clip_8, the id identifies the svgroot and, ideally, restored after test execution.
</p>

<p>.testDOM matches pre, post; no id </p>
<p class="DOMreftest envokeOperation" id="SVGbroke-idnone">
<span class="pre-reference" >
<svg viewbox="-2 -2 68 68" width="68" height="68">
<rect class="value" x="0" y="0" width="32" height="32" />
</svg>
</span>
&nbsp;==&gt;&nbsp;
<span class="post-reference">
<svg viewbox="-2 -2 68 68" width="68" height="68">
<rect class="value" x="0" y="0" width="32" height="32" />
</svg>
</span>
&nbsp;:&nbsp;&nbsp;&nbsp;
<span class="testDOM">
<svg viewbox="-2 -2 68 68" width="68" height="68">
<rect class="value" x="0" y="0" width="32" height="32" />
</svg>
</span>
</p>

<p>.testDOM matches pre, post; id at pre </p>
<p class="DOMreftest envokeOperation" id="SVGbroke-idpre">
<span class="pre-reference" >
<svg viewbox="-2 -2 68 68" width="68" height="68" id="A">
<rect class="value" x="0" y="0" width="32" height="32" />
</svg>
</span>
&nbsp;==&gt;&nbsp;
<span class="post-reference">
<svg viewbox="-2 -2 68 68" width="68" height="68">
<rect class="value" x="0" y="0" width="32" height="32" />
</svg>
</span>
&nbsp;:&nbsp;&nbsp;&nbsp;
<span class="testDOM">
<svg viewbox="-2 -2 68 68" width="68" height="68">
<rect class="value" x="0" y="0" width="32" height="32" />
</svg>
</span>
</p>

<p>.testDOM matches pre, post; id at post </p>
<p class="DOMreftest envokeOperation" id="SVGbroke-idpost">
<span class="pre-reference" >
<svg viewbox="-2 -2 68 68" width="68" height="68">
<rect class="value" x="0" y="0" width="32" height="32" />
</svg>
</span>
&nbsp;==&gt;&nbsp;
<span class="post-reference">
<svg viewbox="-2 -2 68 68" width="68" height="68" id="B">
<rect class="value" x="0" y="0" width="32" height="32" />
</svg>
</span>
&nbsp;:&nbsp;&nbsp;&nbsp;
<span class="testDOM">
<svg viewbox="-2 -2 68 68" width="68" height="68">
<rect class="value" x="0" y="0" width="32" height="32" />
</svg>
</span>
</p>

<p>.testDOM matches pre, post; id at test </p>
<p class="DOMreftest envokeOperation" id="SVGbroke-idtest">
<span class="pre-reference" >
<svg viewbox="-2 -2 68 68" width="68" height="68">
<rect class="value" x="0" y="0" width="32" height="32" />
</svg>
</span>
&nbsp;==&gt;&nbsp;
<span class="post-reference">
<svg viewbox="-2 -2 68 68" width="68" height="68">
<rect class="value" x="0" y="0" width="32" height="32" />
</svg>
</span>
&nbsp;:&nbsp;&nbsp;&nbsp;
<span class="testDOM">
<svg viewbox="-2 -2 68 68" width="68" height="68" id="C">
<rect class="value" x="0" y="0" width="32" height="32" />
</svg>
</span>
</p>

<p>.testDOM matches pre, post; id at test, pre, post (matching). Last test passes if id restored correctly, ignoring the fact that there are two identical ids. </p>
<p class="DOMreftest envokeOperation" id="SVGbroke-idtestpost">
<span class="pre-reference" >
<svg viewbox="-2 -2 68 68" width="68" height="68" id="D">
<rect class="value" x="0" y="0" width="32" height="32" />
</svg>
</span>
&nbsp;==&gt;&nbsp;
<span class="post-reference">
<svg viewbox="-2 -2 68 68" width="68" height="68" id="D">
<rect class="value" x="0" y="0" width="32" height="32" />
</svg>
</span>
&nbsp;:&nbsp;&nbsp;&nbsp;
<span class="testDOM">
<svg viewbox="-2 -2 68 68" width="68" height="68" id="D">
<rect class="value" x="0" y="0" width="32" height="32" />
</svg>
</span>
</p>

<script src="../spec/spec_DOMrefsheet.js"></script>

</body>
</html>
